cat /etc/openldap/slapd.conf
modulepath /usr/lib64/openldap
moduleload back_sql.la

include /etc/openldap/schema/core.schema
include /etc/openldap/schema/cosine.schema
include /etc/openldap/schema/inetorgperson.schema
include /etc/openldap/schema/nis.schema

pidfile /var/run/slapd.pid
argsfile /var/run/slapd.args
# logfile /var/log/openldap.log
loglevel 256

# password-hash {SHA}
# security ssf=128
# localSSF 128

TLSCertificateFile /etc/openldap/assets/certs/ldap.crt
TLSCertificateKeyFile /etc/openldap/assets/certs/ldap.key

TLSVerifyClient allow


database config
rootdn "cn=config"
rootpw config

database sql
suffix "dc=example,dc=org"
rootdn "cn=admin,dc=example,dc=org"
rootpw admin
dbname ldap_odbc_mysql
dbuser root
dbpasswd root
has_ldapinfo_dn_ru no
autocommit yes
subtree_cond "ldap_entries.dn LIKE CONCAT('%',?)"
insentry_stmt "insert into ldap_entries (id,dn,oc_map_id,parent,keyval) values ((select max(id)+1 from ldap_entries),?,?,?,?)"
at_query "SELECT name,sel_expr,from_tbls,join_where,create_proc,delete_proc,param_order,expect_return FROM ldap_attr_mappings WHERE oc_map_id=?"

arkid-be        | /var/arkid/docker-entrypoint.sh: line 13: exec: supervisord: not found
arkid-be        | ++ id -u
arkid-be        | + '[' supervisord = tini -a 0 = 0 ']'
arkid-be        | + exec supervisord


ps -ef
UID          PID    PPID  C STIME TTY          TIME CMD
root           1       0  4 06:09 ?        00:00:00 /usr/local/bin/python /usr/local/bin/supervisord
root           9       0  0 06:09 pts/0    00:00:00 bash
root          15       1 37 06:09 ?        00:00:01 /usr/local/bin/python3.8 manage.py runserver 0.0.0.0:80
root          16       1 84 06:09 ?        00:00:02 /usr/local/bin/python /usr/local/bin/celery -A tasks.celery beat -l debug
root          17       1 99 06:09 ?        00:00:03 /usr/local/bin/python /usr/local/bin/celery -A tasks.celery worker -l debug
root         294      15 89 06:09 ?        00:00:01 /usr/local/bin/python3.8 manage.py runserver 0.0.0.0:80
root         388      17  0 06:09 ?        00:00:00 /usr/local/bin/python /usr/local/bin/celery -A tasks.celery worker -l debug
root         389      17  0 06:09 ?        00:00:00 /usr/local/bin/python /usr/local/bin/celery -A tasks.celery worker -l debug
root         390      17  0 06:09 ?        00:00:00 /usr/local/bin/python /usr/local/bin/celery -A tasks.celery worker -l debug
root         391      17  0 06:09 ?        00:00:00 /usr/local/bin/python /usr/local/bin/celery -A tasks.celery worker -l debug
root         392      17  0 06:09 ?        00:00:00 /usr/local/bin/python /usr/local/bin/celery -A tasks.celery worker -l debug
root         393       9  0 06:09 pts/0    00:00:00 ps -ef